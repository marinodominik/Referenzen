
import java.awt.Toolkit;
import java.awt.event.WindowEvent;
import javax.swing.JOptionPane;

/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */


/**
 *
 * @author Emre
 */


import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import javafx.stage.FileChooser;
import javax.swing.*;
import net.proteanit.sql.DbUtils;
import tanktool3.javaconnect;
public class MainWindow extends javax.swing.JFrame {
    static Connection conn = null;
    static ResultSet rs = null;
    static PreparedStatement pst = null;

    /**
     * Creates new form MainWindow
     */
    public MainWindow() {
        initComponents();
        conn=javaconnect.ConnecrDb();
        //setcombonents for combobox and something else
        Update_table("");
        FillCombobox("");
        get_carID("");
        get_userID("");
        get_fuelID();
    }
    
    //closing window
    public void close(){
        WindowEvent winClosingEvent =  new WindowEvent(this, WindowEvent.WINDOW_CLOSING);
        Toolkit.getDefaultToolkit().getSystemEventQueue().postEvent(winClosingEvent);
    }
    
    //
    private void Update_table(String username){
        try{
        username=Login_JFrame.get_username();
        String sql= "SELECT CAR.CarName, stationname as Fuelstation,daytime as Daytime,ppLiter as Literprice,literamount as Amount,endcost as Total,y.fuelname as Fuel, x.kmstatus as kmRange\n" +
        "from FuelEntry x join FUEL AS y\n" +
        "ON x.fuelID=y.id\n" +
        "join CAR\n" +
        "on x.carID=CAR.id\n" +
        "join UserData on x.userid=UserData.id where UserData.username='"+Login_JFrame.get_username()+"' ORDER BY x.id DESC";
    
        pst=conn.prepareStatement(sql);
        rs=pst.executeQuery();
        table.setModel(DbUtils.resultSetToTableModel(rs));
        }catch(Exception e){
            JOptionPane.showMessageDialog(null, e);
        }
    
    }
    
    
    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {
        bindingGroup = new org.jdesktop.beansbinding.BindingGroup();

        jFileChooser1 = new javax.swing.JFileChooser();
        jFrame1 = new javax.swing.JFrame();
        jScrollPane1 = new javax.swing.JScrollPane();
        table = new javax.swing.JTable();
        jLabel1 = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        jLabel4 = new javax.swing.JLabel();
        jLabel5 = new javax.swing.JLabel();
        jLabel6 = new javax.swing.JLabel();
        daytime = new javax.swing.JTextField();
        ppLiter = new javax.swing.JTextField();
        endcost = new javax.swing.JTextField();
        stationname = new javax.swing.JTextField();
        deleteFuelEntryFormDatabase = new javax.swing.JButton();
        saveNewEntryIntoDatabase = new javax.swing.JButton();
        refreshTable = new javax.swing.JButton();
        openStatisticsFrame = new javax.swing.JButton();
        logout = new javax.swing.JButton();
        car_combobox = new javax.swing.JComboBox<>();
        jLabel7 = new javax.swing.JLabel();
        literamount = new javax.swing.JTextField();
        showAllCars = new javax.swing.JButton();
        jLabel8 = new javax.swing.JLabel();
        kmstatus = new javax.swing.JTextField();

        javax.swing.GroupLayout jFrame1Layout = new javax.swing.GroupLayout(jFrame1.getContentPane());
        jFrame1.getContentPane().setLayout(jFrame1Layout);
        jFrame1Layout.setHorizontalGroup(
            jFrame1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 400, Short.MAX_VALUE)
        );
        jFrame1Layout.setVerticalGroup(
            jFrame1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 300, Short.MAX_VALUE)
        );

        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);

        table.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null}
            },
            new String [] {
                "Title 1", "Title 2", "Title 3", "Title 4"
            }
        ));
        jScrollPane1.setViewportView(table);

        jLabel1.setFont(new java.awt.Font("AppleGothic", 0, 13)); // NOI18N
        jLabel1.setText("Car:");

        jLabel2.setFont(new java.awt.Font("AppleGothic", 0, 13)); // NOI18N
        jLabel2.setText("Date (YYYY.MM.DD):");
        jLabel2.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                jLabel2FocusGained(evt);
            }
        });

        jLabel4.setFont(new java.awt.Font("AppleGothic", 0, 13)); // NOI18N
        jLabel4.setText("Price per Liter:");

        jLabel5.setFont(new java.awt.Font("AppleGothic", 0, 13)); // NOI18N
        jLabel5.setText("Total Cost:");

        jLabel6.setFont(new java.awt.Font("AppleGothic", 0, 13)); // NOI18N
        jLabel6.setText("Fuel Station:");

        daytime.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                daytimeActionPerformed(evt);
            }
        });

        deleteFuelEntryFormDatabase.setFont(new java.awt.Font("AppleGothic", 0, 11)); // NOI18N
        deleteFuelEntryFormDatabase.setIcon(new javax.swing.ImageIcon(getClass().getResource("/images/interface.png"))); // NOI18N
        deleteFuelEntryFormDatabase.setText("Delete");
        deleteFuelEntryFormDatabase.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                deleteFuelEntryFormDatabaseActionPerformed(evt);
            }
        });

        saveNewEntryIntoDatabase.setFont(new java.awt.Font("AppleGothic", 0, 11)); // NOI18N
        saveNewEntryIntoDatabase.setIcon(new javax.swing.ImageIcon(getClass().getResource("/images/save.png"))); // NOI18N
        saveNewEntryIntoDatabase.setText("Save");
        saveNewEntryIntoDatabase.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                saveNewEntryIntoDatabaseActionPerformed(evt);
            }
        });

        refreshTable.setFont(new java.awt.Font("AppleGothic", 0, 11)); // NOI18N
        refreshTable.setIcon(new javax.swing.ImageIcon(getClass().getResource("/images/refresh.png"))); // NOI18N
        refreshTable.setText("Refresh");
        refreshTable.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                refreshTableActionPerformed(evt);
            }
        });

        openStatisticsFrame.setFont(new java.awt.Font("AppleGothic", 0, 11)); // NOI18N
        openStatisticsFrame.setIcon(new javax.swing.ImageIcon(getClass().getResource("/images/bars-chart.png"))); // NOI18N
        openStatisticsFrame.setText("STATISTICS");
        openStatisticsFrame.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                openStatisticsFrameActionPerformed(evt);
            }
        });

        logout.setFont(new java.awt.Font("AppleGothic", 0, 11)); // NOI18N
        logout.setIcon(new javax.swing.ImageIcon(getClass().getResource("/images/logout.png"))); // NOI18N
        logout.setText("Logout");
        logout.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                logoutActionPerformed(evt);
            }
        });

        car_combobox.setBackground(new java.awt.Color(204, 51, 0));
        car_combobox.setFont(new java.awt.Font("AppleGothic", 0, 13)); // NOI18N
        car_combobox.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));

        org.jdesktop.beansbinding.Binding binding = org.jdesktop.beansbinding.Bindings.createAutoBinding(org.jdesktop.beansbinding.AutoBinding.UpdateStrategy.READ_WRITE, car_combobox, org.jdesktop.beansbinding.ObjectProperty.create(), car_combobox, org.jdesktop.beansbinding.BeanProperty.create("elements"));
        bindingGroup.addBinding(binding);

        car_combobox.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                car_comboboxActionPerformed(evt);
            }
        });

        jLabel7.setFont(new java.awt.Font("AppleGothic", 0, 13)); // NOI18N
        jLabel7.setText("Literamount:");

        showAllCars.setFont(new java.awt.Font("AppleGothic", 0, 11)); // NOI18N
        showAllCars.setIcon(new javax.swing.ImageIcon(getClass().getResource("/images/automobile.png"))); // NOI18N
        showAllCars.setText("My Car's");
        showAllCars.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                showAllCarsActionPerformed(evt);
            }
        });

        jLabel8.setFont(new java.awt.Font("AppleGothic", 0, 13)); // NOI18N
        jLabel8.setText("Kilometer Status:");

        kmstatus.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                kmstatusActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addContainerGap()
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(layout.createSequentialGroup()
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(jLabel1)
                                    .addComponent(jLabel2)
                                    .addComponent(jLabel4)
                                    .addComponent(jLabel5)
                                    .addComponent(jLabel6)
                                    .addGroup(layout.createSequentialGroup()
                                        .addComponent(deleteFuelEntryFormDatabase, javax.swing.GroupLayout.PREFERRED_SIZE, 90, javax.swing.GroupLayout.PREFERRED_SIZE)
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                        .addComponent(saveNewEntryIntoDatabase, javax.swing.GroupLayout.PREFERRED_SIZE, 122, javax.swing.GroupLayout.PREFERRED_SIZE)))
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                        .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                            .addComponent(car_combobox, javax.swing.GroupLayout.PREFERRED_SIZE, 171, javax.swing.GroupLayout.PREFERRED_SIZE))
                                        .addGroup(layout.createSequentialGroup()
                                            .addGap(31, 31, 31)
                                            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                                .addComponent(kmstatus, javax.swing.GroupLayout.DEFAULT_SIZE, 115, Short.MAX_VALUE)
                                                .addComponent(literamount)
                                                .addComponent(stationname, javax.swing.GroupLayout.Alignment.TRAILING)
                                                .addComponent(endcost)
                                                .addComponent(ppLiter)
                                                .addComponent(daytime))))
                                    .addGroup(layout.createSequentialGroup()
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                        .addComponent(refreshTable, javax.swing.GroupLayout.PREFERRED_SIZE, 94, javax.swing.GroupLayout.PREFERRED_SIZE))))
                            .addComponent(jLabel7)
                            .addComponent(jLabel8))
                        .addGap(18, 18, 18)
                        .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 642, Short.MAX_VALUE)
                        .addGap(17, 17, 17))
                    .addGroup(layout.createSequentialGroup()
                        .addGap(60, 60, 60)
                        .addComponent(openStatisticsFrame, javax.swing.GroupLayout.PREFERRED_SIZE, 238, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(logout))
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(showAllCars, javax.swing.GroupLayout.PREFERRED_SIZE, 179, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(0, 0, Short.MAX_VALUE)))
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(4, 4, 4)
                .addComponent(showAllCars)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(layout.createSequentialGroup()
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                            .addComponent(jLabel1)
                            .addComponent(car_combobox, javax.swing.GroupLayout.PREFERRED_SIZE, 27, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(18, 18, 18)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel2)
                            .addComponent(daytime, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(18, 18, 18)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel4, javax.swing.GroupLayout.PREFERRED_SIZE, 21, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(ppLiter, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(18, 18, 18)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel7)
                            .addComponent(literamount, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(16, 16, 16)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel5)
                            .addComponent(endcost, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(18, 18, 18)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel6)
                            .addComponent(stationname, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(18, 18, 18)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel8)
                            .addComponent(kmstatus, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(59, 59, 59)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(deleteFuelEntryFormDatabase)
                            .addComponent(saveNewEntryIntoDatabase)
                            .addComponent(refreshTable)))
                    .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 343, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(openStatisticsFrame)
                    .addComponent(logout))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        getAccessibleContext().setAccessibleName("Welcome to the Main Menu!");

        bindingGroup.bind();

        pack();
        setLocationRelativeTo(null);
    }// </editor-fold>//GEN-END:initComponents

    private void daytimeActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_daytimeActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_daytimeActionPerformed

    
    //delete fuel entry
    private void deleteFuelEntryFormDatabaseActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_deleteFuelEntryFormDatabaseActionPerformed
        // TODO add your handling code here:
        
        try{
            //deletion only if every entry is correct into the textfield
            String sql="DELETE FROM FuelEntry\n" +
            "where (carID="+get_carID("")+" AND stationname=? AND daytime=? AND ppLiter=?\n" +
            "AND literamount=? AND endcost=? AND userID="+get_userID("")+" AND fuelID="+get_fuelID()+" AND kmstatus=?) ";
            
            pst=conn.prepareStatement(sql);
            pst.setString(1, stationname.getText());
            pst.setString(2,daytime.getText());
            pst.setString(3, ppLiter.getText());
            pst.setString(4, literamount.getText());
            pst.setString(5,endcost.getText());
            pst.setString(6, kmstatus.getText());
            pst.executeUpdate();
            
            JOptionPane.showMessageDialog(null, "Succesfully deleted Fuel Record from history ! Please click on the 'Refresh' Button to update the tableview!  ");
            
        }catch(Exception e){
            //if there is a wrong entry in the textfields it will nothing deleted
            JOptionPane.showMessageDialog(null, e);
        }
        
    }//GEN-LAST:event_deleteFuelEntryFormDatabaseActionPerformed

    //update table
    private void refreshTableActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_refreshTableActionPerformed
        // TODO add your handling code here:
        Update_table("");
    }//GEN-LAST:event_refreshTableActionPerformed

    
    //logout form accoutn
    private void logoutActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_logoutActionPerformed
            
        Login_JFrame newSession = new Login_JFrame();
        JOptionPane.showMessageDialog(null, "Sucessfully logged out from System!");
        close();
        newSession.setVisible(true);
        
    }//GEN-LAST:event_logoutActionPerformed

    private void car_comboboxActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_car_comboboxActionPerformed
        // TODO add your handling code here:        
    }//GEN-LAST:event_car_comboboxActionPerformed
    
    
    
  public int get_carID(String username){
      //get username
      username=Login_JFrame.get_username();
      int quan = 0;
      try{
          //search car id form database with the the help of username and carname
          String sql="SELECT CAR.id\n" +
          "from CAR\n" +
          "JOIN UserData\n" +
          "ON CAR.userID=UserData.id\n" +
          "Where CAR.CarName ='"+(String)car_combobox.getSelectedItem()+
          "' AND UserData.username='"+username+"'";
          pst=conn.prepareStatement(sql);
          rs=pst.executeQuery();
          
          while(rs.next()){
              String str = rs.getString("id");
              quan = Integer.parseInt(str);
          }          
          
      }catch(Exception e){
          JOptionPane.showMessageDialog(null, e);
      }
      System.out.println (quan);
      return quan;
  }
  
  
  
  
  //search fuelid in combobox
  public int get_fuelID(){
      int fuelID=0;
      //
      String carname=(String)car_combobox.getSelectedItem();
      
      try{
          //search the fuelid in the database with the help of the combobox carname
          String sql= "SELECT FUEL.id\n" +
          "FROM FUEL\n" +
          "JOIN CAR\n" +
          "ON FUEL.id=CAR.fuelID\n" +
          "WHERE CarName like '"+carname+"'";
          
          pst=conn.prepareStatement(sql);
          rs=pst.executeQuery();
          
          while(rs.next()){
              String str=rs.getString("id");
              fuelID=Integer.parseInt(str);
          }
      }catch(Exception e){
          JOptionPane.showMessageDialog(null, e);
          
      }
      System.out.println(fuelID);
      return fuelID;
  }
  
  public static int get_userID(String username){
      username = Login_JFrame.get_username();
      int userID=0;
      try{
          String sql="SELECT UserData.id\n" +
                  "From UserData\n" +
                  "where UserData.username='"+username+"'";
          pst=conn.prepareStatement(sql);
          rs=pst.executeQuery();
          while(rs.next()){
              String str = rs.getString("id");
              userID = Integer.parseInt(str);
          }
          
          
          
      }catch(Exception e){
          JOptionPane.showMessageDialog(null, e);
      }
      System.out.println(userID);
      return userID;
  }

    
    private void saveNewEntryIntoDatabaseActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_saveNewEntryIntoDatabaseActionPerformed
        // get all information 
        int carID= get_carID("");
        int userID=get_userID("");
        int fuelID=get_fuelID();
        String s = (String)car_combobox.getSelectedItem();
        
           try{
               //save it in db
               String sql= "Insert into FuelEntry(carID,stationname,daytime,ppLiter,literamount,endcost,userID,fuelID,kmstatus) VALUES ("+carID+",?,?,?,?,?,"+userID+","+fuelID+",?)";
               
               
               pst=conn.prepareStatement(sql);
               pst.setString(1, stationname.getText());
               pst.setString(2,daytime.getText());
               pst.setString(3, ppLiter.getText());
               pst.setString(4, literamount.getText());
               pst.setString(5,endcost.getText());
               pst.setString(6, kmstatus.getText());
               pst.execute();
               
               //String sql2="UPDATE FuelEntry SET kmstatus=? Where id="+carID;
               //pst=conn.prepareStatement(sql2);
               //pst.setString(1, kmstatus.getText());
               //pst.execute();
               JOptionPane.showMessageDialog(null, "Fuel Data succesfully recorded! Please click on the 'Refresh' Button to update the tableview!");
               
           }catch(Exception e){
               JOptionPane.showMessageDialog(null, e);
           }
    }//GEN-LAST:event_saveNewEntryIntoDatabaseActionPerformed

    private void showAllCarsActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_showAllCarsActionPerformed
        // TODO add your handling code here:
        close();
        AddNewCar s= new AddNewCar();
        s.setVisible(true);
    }//GEN-LAST:event_showAllCarsActionPerformed

    private void kmstatusActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_kmstatusActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_kmstatusActionPerformed

    private void jLabel2FocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_jLabel2FocusGained
        // TODO add your handling code here:
    }//GEN-LAST:event_jLabel2FocusGained

    private void openStatisticsFrameActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_openStatisticsFrameActionPerformed
        close();
        Statistics s = new Statistics();
                s.setVisible(true);
    }//GEN-LAST:event_openStatisticsFrameActionPerformed

    
    //fill all cars in combobox
    public void FillCombobox(String username){
        
        username=Login_JFrame.get_username();
        try{
            String sql="SELECT x.CarName\n" +
            "from CAR x\n" +
            "JOIN UserData y\n" +
            "on x.userID=y.id\n" +
            "where username='"+username+"'";
            pst=conn.prepareStatement(sql);
            rs=pst.executeQuery();
            
            while(rs.next()){
                String name= rs.getString("CarName");
                car_combobox.addItem(name);
            }
            
        
        }catch(Exception e){
        
        }
   
}
    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(MainWindow.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(MainWindow.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(MainWindow.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(MainWindow.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new MainWindow().setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JComboBox<String> car_combobox;
    private javax.swing.JTextField daytime;
    private javax.swing.JButton deleteFuelEntryFormDatabase;
    private javax.swing.JTextField endcost;
    private javax.swing.JFileChooser jFileChooser1;
    private javax.swing.JFrame jFrame1;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JLabel jLabel7;
    private javax.swing.JLabel jLabel8;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JTextField kmstatus;
    private javax.swing.JTextField literamount;
    private javax.swing.JButton logout;
    private javax.swing.JButton openStatisticsFrame;
    private javax.swing.JTextField ppLiter;
    private javax.swing.JButton refreshTable;
    private javax.swing.JButton saveNewEntryIntoDatabase;
    private javax.swing.JButton showAllCars;
    private javax.swing.JTextField stationname;
    private javax.swing.JTable table;
    private org.jdesktop.beansbinding.BindingGroup bindingGroup;
    // End of variables declaration//GEN-END:variables
}
